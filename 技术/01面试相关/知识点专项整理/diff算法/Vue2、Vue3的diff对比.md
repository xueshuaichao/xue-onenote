原文地址：https://segmentfault.com/a/1190000042586883?sort=newest
diff 算法是一种通过同层的树节点进行比较的高效算法，避免了对树进行逐层搜索遍历，所以时间复杂度只有 O(n)。

 ## Vue2的diff算法核心

基本原理
- 首先进行新老节点，头头、尾尾对比，寻找未移动的节点。
- 然后进行新老节点，头尾、尾头对比，这一步即寻找移动后可复用的节点。
- 然后在剩余新老结点中对比寻找可复用节点，创建一个老节点keyToIndex的哈希表map记录 key，然后继续遍历新节点索引通过 key 查找可以复用的旧的节点。
- 节点遍历完成后，通过新老索引，进行移除多余老节点或者增加新节点的操作。

 ## Vue3的diff算法核心
基本原理
- 首先进行新老节点头头、尾尾对比，寻找未移动的节点。
- 然后创建一个新节点在旧节点中的位置的映射表，这个映射表的元素如果不为空，代表可复用。
- 然后根据这个映射表计算出最长递增子序列，这个序列中的结点代表可以原地复用。之后移动剩下的新结点到正确的位置即递增序列的间隙中。


总的来说，Diff 算法的核心思想是Diff就是将新老虚拟DOM的不同点找到并生成一个补丁，并根据这个补丁生成更新操作，以最小化对实际 DOM 的操作，提高页面渲染的性能和效率。通过深度优先、同层比较的策略，Diff 算法能够高效地处理虚拟 DOM 树的更新，使得页面在数据变化时能够快速响应并更新对应的视图。
